<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>ì „ìì²­ì•½ì •ë³´ | ì²­êµ¬ë‹·ì»´</title>
  <meta name="robots" content="noindex,nofollow"/>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/assets/site.css?v=final-compact-12" />
  <style>
  :root{
    --ink:#0f172a; --muted:#475569; --line:#e2e8f0;
    --brand:#7c3aed; --brand-2:#0ea5e9; --good:#10b981; --bad:#ef4444;
    --bg:#f8fafc; --card:#ffffff;
    --chipbg:#f4f3ff; --chipbd:#e9e5ff; --chipfg:#4c1d95;
  }
  body{background:var(--bg);color:var(--ink);font-family:Pretendard,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;}
  .maxw{max-width:78rem;margin:0 auto;padding:16px}
  .hstack{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
  .title{font-size:32px;font-weight:900;letter-spacing:-.01em;margin:0}
  .subtitle{font-size:13px;color:#64748b;margin-top:2px}
  .logo{height:56px;object-fit:contain}

  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px;box-shadow:0 3px 10px rgba(2,6,23,.04)}
  .chip{font-size:11px;border:1px solid var(--line);border-radius:999px;padding:2px 8px;background:#fff}
  .badge{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--line);border-radius:999px;padding:6px 12px;font-size:12px;background:#fff}
  .badge.ok{border-color:#86efac;background:#ecfdf5;color:#065f46}
  .badge.no{border-color:#fecaca;background:#fef2f2;color:#991b1b}

  .btn{
    display:inline-flex;align-items:center;gap:8px;border-radius:12px;border:1px solid var(--line);background:#fff;
    padding:10px 14px;font-weight:800;text-decoration:none;color:#0f172a;
    transition:transform .15s ease, box-shadow .15s ease, background-color .15s ease, opacity .15s ease;
    box-shadow:0 4px 10px rgba(2,6,23,.06);
  }
  .btn:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(2,6,23,.08);background:#f8fafc}
  .btn[disabled], .btn.muted{opacity:.55;cursor:not-allowed}
  .btn svg{width:16px;height:16px}

  .grid{display:grid;gap:16px}
  /* ğŸ‘‰ ë°˜ë°˜ ë ˆì´ì•„ì›ƒ */
  @media (min-width:1024px){ .grid-2{grid-template-columns:1fr 1fr} }

  .hero{ border-radius:20px; padding:22px; border:1px solid rgba(124,58,237,.25); }
  .hero .heading{
    font-size:22px; font-weight:900; margin:0 0 12px; text-align:center;
    padding:12px 18px; border-radius:999px; color:#fff; letter-spacing:-.01em;
    background: linear-gradient(135deg,#2563eb,#1d4ed8);
    box-shadow: 0 10px 24px rgba(37,99,235,.25), inset 0 1px 0 rgba(255,255,255,.25);
    border: 1px solid rgba(29,78,216,.6);
  }
  .hero .rows{display:grid; gap:10px}
  @media (min-width:640px){ .hero .rows{grid-template-columns:1fr 1fr} }
  .kv{background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px 12px}
  .kv .k{font-size:12px;color:#475569}
  .kv .v{font-size:16px;font-weight:800;color:#111827;margin-top:1px}
  .hero .actions{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}

  .rowspec{display:grid;gap:10px}
  .spec{
    display:grid;grid-template-columns:minmax(12rem,16rem) 1fr;
    align-items:center;gap:12px;padding:10px 0;border-top:1px dashed rgba(100,116,139,.28)
  }
  .spec:first-child{border-top:0}
  .key{
    display:inline-flex;align-items:center;justify-content:center;
    height:36px;padding:0 12px;border-radius:999px;background:#e6f0ff;border:1px solid #cfe1ff;
    font-weight:700;color:#1e3a8a;white-space:nowrap
  }
  .key.wide{min-width:16rem;}
  .val{color:#0f172a;text-align:center}

  .silson{background:#fff;border:1px solid rgba(100,116,139,.22);border-radius:16px;padding:16px;box-shadow:0 3px 10px rgba(2,6,23,.04)}
  .silson h3{margin:0 0 8px;font-weight:900}
  .list{display:grid;gap:8px}

  .row-kv{display:grid;grid-template-columns:minmax(10.5rem,13.5rem) 1fr;align-items:center;gap:12px;border-top:1px dashed rgba(100,116,139,.26);padding:12px 0}
  .row-kv:first-child{border-top:0}
  .row-kv .k{font-weight:800;color:#334155}
  .row-kv .v{color:#0f172a;line-height:1.55;word-break:keep-all;white-space:normal}
  .cols2{display:grid;gap:14px}
  @media (min-width:900px){ .cols2{grid-template-columns:1fr 1fr} }

  .kv-deduct{display:grid;gap:8px}
  .kv-deduct .subtitle-line{font-size:12px;color:#475569}
  .kv-deduct .grid{display:grid;grid-template-columns:auto 1fr;gap:6px 14px;align-items:center}
  .kv-deduct .k-chip{
    padding:2px 8px;border:1px solid var(--chipbd);border-radius:999px;font-size:12px;
    color:var(--chipfg);background:var(--chipbg);white-space:nowrap
  }
  .kv-deduct .v-num{font-weight:800;white-space:nowrap;letter-spacing:.01em}

  .quick-nav{margin-left:auto;display:flex;gap:8px;flex-wrap:wrap}
  .quick-nav a{font-size:12px;padding:8px 10px}

  .compact-grid{display:grid;gap:14px}
  @media (min-width:980px){ .compact-grid{grid-template-columns:1fr 1fr} }
  .compact-card .title-mini{font-weight:900;margin:0 0 10px}
  .kv-mini{display:grid;grid-template-columns:minmax(7rem,9rem) 1fr;gap:10px;align-items:center;border-top:1px dashed #e5e7eb;padding:8px 0}
  .kv-mini:first-child{border-top:0}
  .kv-mini .k{font-weight:700;color:#334155}
  .kv-mini .v{color:#0f172a}
  </style>

  <style id="enroll-override">
.page-enroll.theme-pro{
  background:
    radial-gradient(28px 28px at 14px 14px, rgba(124,58,237,.08) 1px, transparent 1px),
    linear-gradient(180deg, #eef3ff 0%, #eaf0ff 32%, #f7f9ff 100%) !important;
  background-size:28px 28px, auto !important;
}
.page-enroll .section-title{
  text-align:center; font-weight:900; margin:0 0 12px; padding:10px 16px; border-radius:999px;
  color:#0f172a; letter-spacing:-.01em; box-shadow:0 6px 16px rgba(2,6,23,.10);
  background:linear-gradient(135deg,#eef2ff,#e0f2fe);
}
.page-enroll .section-title.st-violet{ background:linear-gradient(135deg,#ede9fe,#e0e7ff); }
.page-enroll .section-title.st-blue  { background:linear-gradient(135deg,#dbeafe,#e0f2fe); }
.page-enroll .section-title.st-teal  { background:linear-gradient(135deg,#ccfbf1,#d1fae5); }

.page-enroll.theme-pro .card,
.page-enroll.theme-pro .silson{
  background:#fff !important; border:1px solid rgba(100,116,139,.26) !important;
  border-radius:18px !important; box-shadow:0 10px 24px rgba(2,6,23,.08) !important;
}
.page-enroll.theme-pro .btn{border-color:#cad3ff !important;background:#fff !important;box-shadow:0 5px 14px rgba(2,6,23,.10) !important}
.page-enroll.theme-pro .btn:hover{ transform:translateY(-2px) !important; box-shadow:0 12px 26px rgba(2,6,23,.16) !important; }
  </style>
</head>

<body class="page-enroll theme-pro">
  <header class="maxw">
    <div class="hstack" style="gap:12px">
      <a href="/" class="btn">â† ëª©ë¡ìœ¼ë¡œ</a>
      <span class="chip">ì „ìì²­ì•½</span>

      <div class="quick-nav">
        <a class="btn" href="#enroll">ëª¨ë°”ì¼ì²­ì•½</a>
        <a class="btn" href="#silson_single">ë‹¨ë…ì‹¤ì†</a>
        <a class="btn" href="#silson_common_card">4ì„¸ëŒ€ì‹¤ì†</a>
        <a class="btn" href="#ub_section">ìœ ë³‘ìì‹¤ì†</a>
        <a class="btn" href="#senior_section">ë…¸í›„ì‹¤ì†</a>
      </div>
    </div>

    <div class="hstack" style="gap:14px;margin-top:12px">
      <img id="logo" class="logo" alt="ë¡œê³ " />
      <div>
        <h1 class="title" id="company">ì „ìì²­ì•½ì •ë³´</h1>
        <p class="subtitle">íšŒì‚¬ë³„ ì „ìì²­ì•½ í•µì‹¬ ì§€í‘œë¥¼ í•œëˆˆì— í™•ì¸í•˜ê³ , ë°”ë¡œ ì‹¤í–‰í•˜ì„¸ìš”.</p>
        <div class="hstack" id="badges" style="gap:8px;margin-top:6px"></div>
      </div>
    </div>
  </header>

  <main class="maxw grid grid-2" style="margin-top:14px">
    <!-- ëª¨ë°”ì¼ ì „ìì²­ì•½ -->
    <section id="enroll" class="hero" style="grid-column:1/-1">
      <div class="heading">ëª¨ë°”ì¼ ì „ìì²­ì•½ ì •ë³´</div>
      <div class="rows">
        <div class="kv"><div class="k">ëª¨ë°”ì¼ ì²­ì•½ ê°€ëŠ¥ ë‚˜ì´</div><div class="v" id="kv_mobile_age">â€“</div></div>
        <div class="kv"><div class="k">ì „ìì²­ì•½ ì‚¬ìš©ì‹œê°„</div><div class="v" id="kv_usage_hours">â€“</div></div>
        <div class="kv"><div class="k">í†µí™”ê°€ëŠ¥ì‹œê°„</div><div class="v" id="kv_call_hours">â€“</div></div>
        <div class="kv"><div class="k">ì¸ì½œ ëª¨ë‹ˆí„°ë§</div><div class="v" id="kv_incall">â€“</div></div>
      </div>
      <div class="actions">
        <a id="btn_cs_tel" class="btn">ê³ ê°ì„¼í„°: <span id="txt_cs_tel">â€“</span></a>
        <a id="btn_fax_tel" class="btn">ë³´í—˜ê¸ˆì²­êµ¬ FAX: <span id="txt_fax_tel">â€“</span></a>
        <a id="btn_help_tel" class="btn">í—¬í”„ë°ìŠ¤í¬(ì „ì‚°): <span id="txt_help_tel">â€“</span></a>
      </div>
    </section>

    <!-- ì¢Œ: ìƒì„¸ -->
    <section class="card">
      <h2 class="section-title st-blue">ëª¨ë°”ì¼ ì „ìì²­ì•½ ì •ë³´ ìƒì„¸ë‚´ìš©</h2>
      <div class="rowspec">
        <div class="spec"><div class="key">ì‚¬ìš©ê¸°í•œ</div><div class="val" id="usage_period">â€“</div></div>
        <div class="spec"><div class="key">ì‚¬ìš©ì‹œê°„</div><div class="val" id="usage_hours">â€“</div></div>
        <div class="spec"><div class="key">í†µí™”ê°€ëŠ¥ì‹œê°„</div><div class="val" id="call_hours">â€“</div></div>
        <div class="spec"><div class="key">ëª¨ë°”ì¼ ì²­ì•½ ê°€ëŠ¥ ë‚˜ì´</div><div class="val" id="mobile_age">â€“</div></div>
        <div class="spec"><div class="key wide">ê³„ì•½ìÂ·í”¼ë³´í—˜ì ë¶ˆì¼ì¹˜ì‹œ ê°€ëŠ¥ì—¬ë¶€</div><div class="val" id="gps">â€“</div></div>
        <div class="spec"><div class="key">ì¹´ë“œë‚© ê°€ëŠ¥ ì—¬ë¶€</div><div class="val" id="cardpay">â€“</div></div>
        <div class="spec"><div class="key">ì¸ì½œ ëª¨ë‹ˆí„°ë§</div><div class="val" id="incall">â€“</div></div>
      </div>
      <p class="subtitle" id="note" style="margin-top:12px;display:none"></p>
      <p class="subtitle" id="warn" style="margin-top:8px;color:#b45309;display:none"></p>
    </section>

    <!-- ìš°: ë‹¨ë… ì‹¤ì† -->
    <aside class="silson" id="silson_single">
      <h3 class="section-title st-violet">ë‹¨ë… ì‹¤ì† ì•ˆë‚´</h3>
      <div class="hstack" id="silson_badges" style="gap:8px;margin-bottom:6px"></div>

      <div class="card" style="margin-top:8px">
        <div class="list" id="silson_summary"></div>
      </div>

      <div class="card" id="silson_common_card" style="margin-top:10px">
        <h4 class="section-title st-blue" style="margin-bottom:12px">4ì„¸ëŒ€ ì‹¤ì† ê³µí†µì‚¬í•­</h4>
        <div class="list cols2" id="silson_common"></div>
      </div>

      <div class="card" style="margin-top:10px">
        <h4 class="section-title st-teal" style="margin-bottom:12px">ì „í™˜/ì¸ìˆ˜</h4>
        <div class="list" id="silson_convert"></div>
      </div>

      <div class="card" style="margin-top:10px">
        <div class="list" id="silson_specials"></div>
      </div>

      <p class="subtitle" style="margin-top:8px" id="silson_updated"></p>
    </aside>

    <!-- ìœ ë³‘ì/ë…¸í›„ ìš”ì•½ -->
    <section class="card" style="grid-column:1/-1">
      <h2 class="section-title st-teal" style="margin-bottom:12px">ìœ ë³‘ìÂ·ë…¸í›„ ì‹¤ì† ìš”ì•½</h2>
      <div class="compact-grid">
        <div id="ub_section" class="card compact-card">
          <h3 class="title-mini">ìœ ë³‘ì ì‹¤ì†ì˜ë£Œë¹„</h3>
          <div id="ub_kvs"></div>
          <div id="ub_common" style="margin-top:10px"></div>
        </div>
        <div id="senior_section" class="card compact-card">
          <h3 class="title-mini">ë…¸í›„ ì‹¤ì†ì˜ë£Œë¹„</h3>
          <div id="senior_kvs"></div>
        </div>
      </div>
    </section>

    <section class="card" style="grid-column:1/-1">
      <h2 class="section-title st-violet" style="margin-bottom:12px">ì„¤ëª… & ì£¼ì˜</h2>
      <p class="subtitle">íšŒì‚¬ ì •ì±… ë³€ê²½ ì‹œ ì‹¤ì œ ì ìš©ê³¼ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–¸ì œë‚˜ ìµœì‹  ê³µì§€ì™€ ì•½ê´€ì„ ìš°ì„ í•˜ì„¸ìš”.</p>
    </section>
  </main>

  <script>
  (function(){
    const $ = s => document.querySelector(s);
    const company = new URL(location.href).searchParams.get('c') || '';

    const telfmt = (s) => {
      const d = String(s || '').replace(/[^0-9]/g, '');
      if (!d) return '';
      if (/^(15|16|18)\d{6}$/.test(d)) return d.slice(0,4) + '-' + d.slice(4);
      if (d.startsWith('02') && (d.length === 9 || d.length === 10)) {
        return d.length === 9 ? `02-${d.slice(2,5)}-${d.slice(5)}` : `02-${d.slice(2,6)}-${d.slice(6)}`;
      }
      if (d.length === 10) return `${d.slice(0,3)}-${d.slice(3,6)}-${d.slice(6)}`;
      if (d.length === 11) return `${d.slice(0,3)}-${d.slice(3,7)}-${d.slice(7)}`;
      return s || '';
    };

    const asBool = (v) => {
      const s = String(v ?? '').trim().toLowerCase();
      if (!s) return null;
      if (['ê°€ëŠ¥','yes','true','o','ok','y','1'].includes(s)) return true;
      if (['ë¶ˆê°€','no','false','x','0'].includes(s)) return false;
      return null;
    };

    const kvRow = (k,v) => `<div class="row-kv"><div class="k">${k}</div><div class="v">${v || 'â€“'}</div></div>`;

    async function fetchMaybe(url){
      const res = await fetch(url);
      if(!res.ok){ if(res.status===404) return null; throw new Error(`[${url}] HTTP ${res.status}`); }
      try{ return await res.json(); }catch(e){ throw new Error(`[${url}] JSON íŒŒì‹± ì‹¤íŒ¨: ${e.message}`); }
    }

    function addBadgesFromSilson(record){
      const bf = $('#badges');
      bf.innerHTML = '';
      const solo = asBool(record['ë‹¨ë…ê°€ì…ì—¬ë¶€']);
      const card = asBool(record['ì¹´ë“œë‚© ê°€ëŠ¥']);
      bf.insertAdjacentHTML('beforeend', `<span class="badge ${solo===false?'no':(solo===true?'ok':'')}">${solo===false?'ë‹¨ë…ì‹¤ì† ê°€ì… ë¶ˆê°€':(solo===true?'ë‹¨ë…ì‹¤ì† ê°€ì…ê°€ëŠ¥':'ë‹¨ë…ì‹¤ì† ì •ë³´ ì—†ìŒ')}</span>`);
      bf.insertAdjacentHTML('beforeend', `<span class="badge ${card===false?'no':(card===true?'ok':'')}">${card===false?'ì¹´ë“œë‚© ë¶ˆê°€':(card===true?'ì¹´ë“œë‚© ê°€ëŠ¥':'ì¹´ë“œë‚© ì •ë³´ ì—†ìŒ')}</span>`);
    }

    function renderSilsonCompany(bundle, name){
      const updated = bundle?.last_updated || '';
      const record = bundle?.companies?.[name] || {};

      addBadgesFromSilson(record);

      $('#silson_summary').innerHTML =
        kvRow('ë‹¨ë…ê°€ì…ì—¬ë¶€', record['ë‹¨ë…ê°€ì…ì—¬ë¶€']) +
        kvRow('ì¤‘ë³µê°€ì…',     record['ì¤‘ë³µê°€ì…']) +
        kvRow('ì§„ë‹¨ì—¬ë¶€',     record['ì§„ë‹¨ì—¬ë¶€']) +
        kvRow('íŠ¹ì´ì‚¬í•­',     record['íŠ¹ì´ì‚¬í•­']);

      const c = record['ê³µí†µì‚¬í•­'] || {};
      $('#silson_common').innerHTML =
        kvRow('ì£¼ê³„ì•½(ê¸‰ì—¬)', c['ì£¼ê³„ì•½(ê¸‰ì—¬)']) +
        kvRow('íŠ¹ì•½(ë¹„ê¸‰ì—¬)', c['íŠ¹ì•½(ë¹„ê¸‰ì—¬)']) +
        kvRow('ì¬ê°€ì…ì£¼ê¸°',   c['ì¬ê°€ì…ì£¼ê¸°']) +
        kvRow('ë³´í—˜ê¸°ê°„',     c['ë³´í—˜ê¸°ê°„']) +
        kvRow('ìê¸°ë¶€ë‹´ê¸ˆ',   c['ìê¸°ë¶€ë‹´ê¸ˆ']) +
        kvRow('ë³´í—˜ë£Œì°¨ë“±ì œ', c['ë³´í—˜ë£Œì°¨ë“±ì œ']);

      const conv = record['ì „í™˜/ì¸ìˆ˜'] || {};
      $('#silson_convert').innerHTML =
        kvRow('ì „í™˜ì¸ìˆ˜ê¸°ì¤€ ì¡°ê±´',      conv['ì „í™˜ì¸ìˆ˜ê¸°ì¤€ì¡°ê±´']) +
        kvRow('ê³¼ê±° ì‹¤ì†ìƒí’ˆë³„ ì „í™˜ì—¬ë¶€', conv['ê³¼ê±°ì‹¤ì†ìƒí’ˆë³„ì „í™˜ì—¬ë¶€']) +
        kvRow('ì „í™˜ì‹œ ê³ ì§€ì‚¬í•­',        conv['ì „í™˜ì‹œê³ ì§€ì‚¬í•­']);

      const specials = [];
      Object.entries(record).forEach(([k,v])=>{
        if(!v) return;
        if (['ë‹¨ë…ê°€ì…ì—¬ë¶€','ì¤‘ë³µê°€ì…','ì§„ë‹¨ì—¬ë¶€','íŠ¹ì´ì‚¬í•­','ê³µí†µì‚¬í•­','ì „í™˜/ì¸ìˆ˜','ìœ ë³‘ì ì‹¤ì†ì˜ë£Œë¹„','ë…¸í›„ ì‹¤ì†ì˜ë£Œë¹„','ìœ ë³‘ì ì‹¤ì† ì»´íŒ©íŠ¸','ë…¸í›„ ì‹¤ì† ì»´íŒ©íŠ¸','ìœ ë³‘ì ê³µí†µì‚¬í•­'].includes(k)) return;
        specials.push(kvRow(k, v));
      });
      $('#silson_specials').innerHTML = specials.join('') || kvRow('ì¶”ê°€ì•ˆë‚´','í•´ë‹¹ ì—†ìŒ');

      $('#silson_updated').textContent = updated ? `â€» ë°ì´í„° ê¸°ì¤€ì¼: ${updated}` : '';

      // ìœ ë³‘ì ìš”ì•½
      const ub = record['ìœ ë³‘ì ì‹¤ì† ì»´íŒ©íŠ¸'] || null;
      const ubEl = $('#ub_kvs'); ubEl.innerHTML = '';
      if (ub && typeof ub === 'object'){
        const want = ['ì…ì›','í†µì›','ì¬ê°€ì…ì£¼ê¸°','ë³´í—˜ê¸°ê°„','ìê¸°ë¶€ë‹´ê¸ˆ','3ëŒ€ë¹„ê¸‰ì—¬/ì•½ì œë¹„','ì•Œë¦´ì˜ë¬´'];
        want.forEach(k=>{
          ubEl.insertAdjacentHTML('beforeend', `<div class="kv-mini"><div class="k">${k}</div><div class="v">${ub[k] ?? 'â€“'}</div></div>`);
        });
        const ubCommon = record['ìœ ë³‘ì ê³µí†µì‚¬í•­'] || '';
        if(ubCommon){ $('#ub_common').innerHTML = `<div class="kv-mini"><div class="k">ê³µí†µì‚¬í•­</div><div class="v">${ubCommon}</div></div>`; }
      }else{
        ubEl.innerHTML = `<div class="kv-mini"><div class="k">ìš”ì•½</div><div class="v">${record['ìœ ë³‘ì ì‹¤ì†ì˜ë£Œë¹„'] || 'â€“'}</div></div>`;
      }

      // ë…¸í›„ ìš”ì•½
      const sn = record['ë…¸í›„ ì‹¤ì† ì»´íŒ©íŠ¸'] || null;
      const snEl = $('#senior_kvs'); snEl.innerHTML='';
      if (sn && typeof sn === 'object'){
        const want = ['ê¸°ë³¸ê³„ì•½1','ê¸°ë³¸ê³„ì•½2','ì„ íƒê³„ì•½1','ì„ íƒê³„ì•½2','ì¬ê°€ì…ì£¼ê¸°','ë³´í—˜ê¸°ê°„','3ëŒ€ë¹„ê¸‰ì—¬/ì•½ì œë¹„','ì•Œë¦´ì˜ë¬´'];
        want.forEach(k=>{
          snEl.insertAdjacentHTML('beforeend', `<div class="kv-mini"><div class="k">${k}</div><div class="v">${sn[k] ?? 'â€“'}</div></div>`);
        });
      }else{
        snEl.innerHTML = `<div class="kv-mini"><div class="k">ìš”ì•½</div><div class="v">${record['ë…¸í›„ ì‹¤ì†ì˜ë£Œë¹„'] || 'â€“'}</div></div>`;
      }
    }

    document.querySelectorAll('a[href^="#"]').forEach(a=>{
      a.addEventListener('click', (e)=>{
        const id = a.getAttribute('href');
        const el = document.querySelector(id);
        if(el){ e.preventDefault(); el.scrollIntoView({behavior:'smooth', block:'start'}); }
      });
    });

    (async function init(){
      try{
        const [linksData, enrollData, silsonCompany] = await Promise.all([
          fetchMaybe('/data/links.json?ts='+Date.now()),
          fetchMaybe('/data/enroll.json?ts='+Date.now()),
          fetchMaybe('/data/silson-company.json?ts='+Date.now())
        ]);

        const carriers = Array.isArray(linksData?.carriers) ? linksData.carriers : [];
        const base = carriers.find(x => x.name === company) || {};
        const enr  = (Array.isArray(enrollData?.items) ? enrollData.items : []).find(x => x.name === company) || {};
        const L = base.links || {};

        $('#company').textContent = company || 'ì „ìì²­ì•½ì •ë³´';
        const logoSrc = base.logo || (company ? `/assets/logos/${company}.png` : '');
        if (logoSrc){ const img = $('#logo'); img.src = logoSrc; img.alt = company + ' ë¡œê³ '; }

        const ageTxt = enr.mobile_enroll_age_text || (enr.mobile_enroll_age ? `${enr.mobile_enroll_age.min ?? '?'} ~ ${enr.mobile_enroll_age.max ?? '?'}ì„¸` : 'â€“');
        $('#kv_mobile_age').textContent = ageTxt || 'â€“';
        $('#kv_usage_hours').textContent = enr.usage_hours || 'â€“';
        $('#kv_call_hours').textContent  = enr.call_hours  || 'â€“';
        const incall = enr.incall_monitoring_phone || L.monitor || '';
        $('#kv_incall').textContent = incall ? telfmt(incall) : 'â€“';

        const csTel   = L.cs || '';
        const faxTel  = L.fax || '';
        const helpTel = enr.helpdesk_phone || L.helpdesk || '';
        const bindTelBtn = (btnId, txtId, tel) => {
          const btn = document.getElementById(btnId);
          const span= document.getElementById(txtId);
          if (tel){
            const fmt = telfmt(tel);
            btn.href = 'tel:' + (tel.replace(/\D/g,'')); span.textContent = fmt || tel;
          } else {
            span.textContent = 'â€“'; btn.removeAttribute('href'); btn.classList.add('muted');
          }
        };
        bindTelBtn('btn_cs_tel','txt_cs_tel',csTel);
        bindTelBtn('btn_fax_tel','txt_fax_tel',faxTel);
        bindTelBtn('btn_help_tel','txt_help_tel',helpTel);

        const set = (id, v) => { const el = document.getElementById(id); if(el) el.textContent = (v ?? '') || 'â€“'; };
        const gps  = asBool(enr.gye_pi_sang_available);
        const card = asBool(enr.card_payment_available);
        set('usage_period', enr.usage_period);
        set('usage_hours',  enr.usage_hours);
        set('call_hours',   enr.call_hours);
        set('mobile_age',   ageTxt);

        const gpsDetail = (enr.gye_pi_sang_detail || enr.monitoring_criteria || '').trim();
        const gpsText = gps===false?'ë¶ˆê°€':(gps===true?('ê°€ëŠ¥' + (gpsDetail?` â€” ${gpsDetail}`:'')):'ì •ë³´ ì—†ìŒ');
        set('gps', gpsText);

        const cardDetail = (enr.card_payment_detail || '').trim();
        const cardText = card===false?'ë¶ˆê°€':(card===true?('ê°€ëŠ¥' + (cardDetail?` â€” ${cardDetail}`:'')):'ì •ë³´ ì—†ìŒ');
        set('cardpay', cardText);

        set('incall',       incall ? telfmt(incall) : 'â€“');

        renderSilsonCompany(silsonCompany || {companies:{}}, company);

        (function prettifyMainBenefit(){
          const rows = document.querySelectorAll('#silson_common .row-kv');
          let target = null;
          rows.forEach(r => { if (r.querySelector('.k')?.textContent?.trim() === 'ì£¼ê³„ì•½(ê¸‰ì—¬)') target = r; });
          if (!target) return;
          target.querySelector('.v').innerHTML = `
            <div class="kv-deduct">
              <div class="subtitle-line">80% ë³´ìƒ Â· ê³µì œê¸ˆì•¡</div>
              <div class="grid">
                <span class="k-chip">ì˜ì›</span> <span class="v-num">1ë§Œì›</span>
                <span class="k-chip">ìƒê¸‰Â·ì¢…í•©ì¢…í•©</span> <span class="v-num">2ë§Œì›</span>
              </div>
            </div>`;
        })();

        const inHours = (str) => {
          if(!str) return true;
          if(/24\s*ì‹œê°„/.test(str)) return true;
          const m = str.match(/(\d{2}):(\d{2})\s*[â€“-]\s*(\d{2}):(\d{2})/);
          if(!m) return true;
          const now = new Date(), cur = now.getHours()*60 + now.getMinutes();
          const a = (+m[1])*60+(+m[2]), b=(+m[3])*60+(+m[4]);
          return cur>=a && cur<=b;
        };
        if(enr.usage_hours && !inHours(enr.usage_hours)){
          const w = document.getElementById('warn'); w.style.display='block';
          w.textContent = `ì§€ê¸ˆì€ ì‚¬ìš©ì‹œê°„(${enr.usage_hours}) ì™¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. íšŒì‚¬ ì •ì±…ìƒ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.`;
        }
        if(enr.note){
          const n = document.getElementById('note'); n.style.display='block'; n.textContent = enr.note;
        }

        (function addGpsBadge(){
          const bf = $('#badges');
          const v = enr.gye_pi_sang_available;
          const s = String(v ?? '').trim().toLowerCase();
          let b = null;
          if (!s) b = null;
          else if (['ê°€ëŠ¥','yes','true','o','ok','y','1'].includes(s)) b = true;
          else if (['ë¶ˆê°€','no','false','x','0'].includes(s)) b = false;
          if (b === null) return;
          bf.insertAdjacentHTML('beforeend',
            `<span class="badge ${b?'ok':'no'}">${b?'ê³„í”¼ìƒì´ ê°€ëŠ¥':'ê³„í”¼ìƒì´ ë¶ˆê°€'}</span>`);
        })();

      }catch(err){
        console.error(err);
        const host = document.createElement('div');
        host.className = 'maxw';
        host.style.padding = '24px';
        host.innerHTML = `<h1>ë°ì´í„° ë¡œë“œ ì˜¤ë¥˜</h1><p style="white-space:pre-line">${String(err.message || err)}</p>`;
        document.body.innerHTML = '';
        document.body.appendChild(host);
      }
    })();
  })();
  </script>
</body>
</html>
