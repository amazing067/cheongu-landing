<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tailwind 비교 데모 | CDN vs @apply (표 + 계산기)</title>

  <!-- Tailwind Play CDN: 이 데모에서만 @apply 테스트용 -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 이 블록 안에서만 @apply가 동작(Play CDN이 런타임 컴파일) -->
  <style type="text/tailwindcss">
    @layer components {
      /* 공통 컴포넌트 (@apply 방식) */
      .btn { @apply inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border shadow-sm transition; }
      .btn-ghost { @apply border-slate-200 bg-white hover:bg-white/80; }
      .btn-primary { @apply border-indigo-600 bg-indigo-600 text-white hover:opacity-90; }
      .btn-pdf { @apply border-sky-600 bg-sky-600 text-white hover:opacity-90; }

      .table { @apply overflow-hidden rounded-2xl border border-slate-200; }
      .row { @apply grid items-center gap-4 px-5 py-3 odd:bg-white even:bg-slate-50 hover:bg-white border-t border-slate-200; grid-template-columns:minmax(220px,1.2fr) 3fr; }
      .brand { @apply flex items-center gap-3; }
      .logo { @apply w-12 h-12 rounded-xl border border-slate-200 bg-white flex items-center justify-center overflow-hidden; }
      .name { @apply text-lg md:text-xl font-extrabold text-slate-900; }

      /* 계산기 */
      .calc-card { @apply rounded-3xl border border-indigo-200 bg-white shadow-sm; }
      .display { @apply rounded-2xl border border-slate-200 bg-white p-4 grid gap-1; }
      .display-num { @apply text-3xl font-black tracking-wider; font-variant-numeric: tabular-nums; }
      .key { @apply rounded-xl border py-2 px-4 text-sm font-semibold bg-white hover:bg-slate-50 border-slate-200; }
      .key-primary { @apply border-indigo-600 bg-indigo-600 text-white hover:opacity-90; }
    }
  </style>

  <style>
    body{background:linear-gradient(180deg,#f8fafc 0%,#eef2f7 100%)}
  </style>
</head>
<body class="text-slate-900">
  <div class="max-w-6xl mx-auto px-5 py-10">
    <h1 class="text-3xl font-black">CDN vs <code>@apply</code> 비교 (표 + 계산기)</h1>
    <p class="text-slate-600 mt-1">왼쪽: **CDN 방식(유틸 클래스 직접 나열)** · 오른쪽: **@apply로 만든 컴포넌트 클래스**</p>

    <!-- ========== 1) 표(보험사 리스트) 비교 ========== -->
    <h2 class="text-2xl font-bold mt-8 mb-3">1) 표 리스트</h2>
    <div class="grid md:grid-cols-2 gap-6">
      <!-- A) CDN RAW -->
      <section class="rounded-2xl border border-slate-200 bg-white/70 p-5">
        <h3 class="text-lg font-semibold mb-3">A. CDN (유틸 나열)</h3>
        <div class="overflow-hidden rounded-2xl border border-slate-200">
          <!-- row 1 -->
          <div class="grid items-center gap-4 px-5 py-3 odd:bg-white even:bg-slate-50 hover:bg-white border-t border-slate-200"
               style="grid-template-columns:minmax(220px,1.2fr) 3fr">
            <div class="flex items-center gap-3">
              <span class="w-12 h-12 rounded-xl border border-slate-200 bg-white flex items-center justify-center overflow-hidden">
                <img src="/assets/logos/삼성화재.png" class="w-full h-full object-contain" onerror="this.style.display='none'">
              </span>
              <div class="text-lg md:text-xl font-extrabold text-slate-900">삼성화재</div>
            </div>
            <div class="grid gap-2 sm:grid-cols-5">
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-indigo-600 bg-indigo-600 text-white hover:opacity-90">전산 접속</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-slate-200 bg-white hover:bg-white/80">필요서류 안내</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-sky-600 bg-sky-600 text-white hover:opacity-90">보험금 청구서 PDF 다운로드</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-slate-200 bg-white hover:bg-white/80">고객센터</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-slate-200 bg-white hover:bg-white/80">모바일 청구</a>
            </div>
          </div>
          <!-- row 2 -->
          <div class="grid items-center gap-4 px-5 py-3 odd:bg-white even:bg-slate-50 hover:bg-white border-t border-slate-200"
               style="grid-template-columns:minmax(220px,1.2fr) 3fr">
            <div class="flex items-center gap-3">
              <span class="w-12 h-12 rounded-xl border border-slate-200 bg-white flex items-center justify-center overflow-hidden">
                <img src="/assets/logos/현대해상.png" class="w-full h-full object-contain" onerror="this.style.display='none'">
              </span>
              <div class="text-lg md:text-xl font-extrabold text-slate-900">현대해상</div>
            </div>
            <div class="grid gap-2 sm:grid-cols-5">
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-indigo-600 bg-indigo-600 text-white hover:opacity-90">전산 접속</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-slate-200 bg-white hover:bg-white/80">필요서류 안내</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-sky-600 bg-sky-600 text-white hover:opacity-90">보험금 청구서 PDF 다운로드</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-slate-200 bg-white hover:bg-white/80">고객센터</a>
              <a class="inline-flex items-center justify-center rounded-lg px-3.5 py-2.5 text-sm font-semibold border border-slate-200 bg-white hover:bg-white/80">모바일 청구</a>
            </div>
          </div>
        </div>
        <p class="text-xs text-slate-600 mt-2">HTML에 클래스가 **아주 길게** 반복됨.</p>
      </section>

      <!-- B) @apply -->
      <section class="rounded-2xl border border-slate-200 bg-white/70 p-5">
        <h3 class="text-lg font-semibold mb-3">B. @apply (컴포넌트 클래스)</h3>
        <div class="table">
          <div class="row">
            <div class="brand">
              <span class="logo"><img src="/assets/logos/삼성화재.png" class="w-full h-full object-contain" onerror="this.style.display='none'"></span>
              <div class="name">삼성화재</div>
            </div>
            <div class="grid gap-2 sm:grid-cols-5">
              <a class="btn btn-primary">전산 접속</a>
              <a class="btn btn-ghost">필요서류 안내</a>
              <a class="btn btn-pdf">보험금 청구서 PDF 다운로드</a>
              <a class="btn btn-ghost">고객센터</a>
              <a class="btn btn-ghost">모바일 청구</a>
            </div>
          </div>
          <div class="row">
            <div class="brand">
              <span class="logo"><img src="/assets/logos/현대해상.png" class="w-full h-full object-contain" onerror="this.style.display='none'"></span>
              <div class="name">현대해상</div>
            </div>
            <div class="grid gap-2 sm:grid-cols-5">
              <a class="btn btn-primary">전산 접속</a>
              <a class="btn btn-ghost">필요서류 안내</a>
              <a class="btn btn-pdf">보험금 청구서 PDF 다운로드</a>
              <a class="btn btn-ghost">고객센터</a>
              <a class="btn btn-ghost">모바일 청구</a>
            </div>
          </div>
        </div>
        <p class="text-xs text-slate-600 mt-2">HTML이 **짧고 읽기 쉬움**. 디자인 변경도 CSS 한 군데만 고치면 전역 반영.</p>
      </section>
    </div>

    <!-- ========== 2) 보험나이 계산기 비교 ========== -->
    <h2 class="text-2xl font-bold mt-10 mb-3">2) 보험나이 계산기</h2>
    <div class="grid md:grid-cols-2 gap-6">
      <!-- A) CDN RAW -->
      <section class="rounded-2xl border border-slate-200 bg-white/70 p-5">
        <h3 class="text-lg font-semibold mb-3">A. CDN (유틸 나열)</h3>
        <div class="max-w-[520px]">
          <div class="rounded-3xl border border-indigo-200 bg-white shadow-sm">
            <div class="flex items-center justify-between p-4 border-b border-indigo-200/60">
              <div class="text-base font-bold">나이 계산기</div>
              <div class="text-[11px] px-2 py-0.5 rounded-full border border-indigo-200 bg-white" id="badgeA">–</div>
            </div>
            <div class="p-4 grid gap-3">
              <div class="rounded-2xl border border-slate-200 bg-white p-4 grid gap-1">
                <div class="text-[11px] text-slate-600 flex items-center justify-between"><span>보험나이</span><span>기준: 오늘</span></div>
                <div class="text-3xl font-black tracking-wider"><span id="numA">--</span><span class="text-xl align-top ml-1">세</span></div>
                <div class="text-xs text-slate-600" id="ruleA">생년월일을 입력하세요</div>
              </div>
              <form id="formA" class="grid gap-2 md:grid-cols-[1fr_auto_auto] items-end">
                <div>
                  <label class="text-sm font-medium">생년월일</label>
                  <input id="dobA" type="date" class="mt-1 w-full border border-slate-300 rounded-xl px-4 py-2.5" required />
                </div>
                <button class="rounded-xl border border-indigo-600 bg-indigo-600 text-white py-2 px-4 font-semibold hover:opacity-90" type="submit">계산하기</button>
                <button class="rounded-xl border border-slate-200 bg-white py-2 px-4 font-semibold hover:bg-slate-50" type="button" id="resetA">초기화</button>
              </form>
              <div class="grid gap-2 md:grid-cols-3">
                <div class="rounded-2xl border border-slate-200 bg-white p-3">
                  <div class="text-[11px] text-slate-600">만나이</div>
                  <div class="text-base font-bold mt-0.5"><span id="intlA">–</span> 세</div>
                </div>
                <div class="rounded-2xl border border-slate-200 bg-white p-3">
                  <div class="text-[11px] text-slate-600">다음 반(半)생일까지</div>
                  <div class="text-base font-semibold mt-0.5"><span id="halfA">–</span></div>
                </div>
                <div class="rounded-2xl border border-slate-200 bg-white p-3">
                  <div class="text-[11px] text-slate-600">빠른 동작</div>
                  <div class="mt-1 grid grid-cols-2 gap-2">
                    <button class="rounded-xl border border-slate-200 bg-white py-2 px-3 text-sm font-semibold hover:bg-slate-50" id="copyA" type="button">복사</button>
                    <button class="rounded-xl border border-slate-200 bg-white py-2 px-3 text-sm font-semibold hover:bg-slate-50" id="linkA" type="button">링크</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- B) @apply -->
      <section class="rounded-2xl border border-slate-200 bg-white/70 p-5">
        <h3 class="text-lg font-semibold mb-3">B. @apply (컴포넌트 클래스)</h3>
        <div class="max-w-[520px]">
          <div class="calc-card">
            <div class="flex items-center justify-between p-4 border-b border-indigo-200/60">
              <div class="text-base font-bold">나이 계산기</div>
              <div class="text-[11px] px-2 py-0.5 rounded-full border border-indigo-200 bg-white" id="badgeB">–</div>
            </div>
            <div class="p-4 grid gap-3">
              <div class="display">
                <div class="text-[11px] text-slate-600 flex items-center justify-between"><span>보험나이</span><span>기준: 오늘</span></div>
                <div class="display-num"><span id="numB">--</span><span class="text-xl align-top ml-1">세</span></div>
                <div class="text-xs text-slate-600" id="ruleB">생년월일을 입력하세요</div>
              </div>
              <form id="formB" class="grid gap-2 md:grid-cols-[1fr_auto_auto] items-end">
                <div>
                  <label class="text-sm font-medium">생년월일</label>
                  <input id="dobB" type="date" class="mt-1 w-full border border-slate-300 rounded-xl px-4 py-2.5" required />
                </div>
                <button class="key key-primary" type="submit">계산하기</button>
                <button class="key" type="button" id="resetB">초기화</button>
              </form>
              <div class="grid gap-2 md:grid-cols-3">
                <div class="rounded-2xl border border-slate-200 bg-white p-3">
                  <div class="text-[11px] text-slate-600">만나이</div>
                  <div class="text-base font-bold mt-0.5"><span id="intlB">–</span> 세</div>
                </div>
                <div class="rounded-2xl border border-slate-200 bg-white p-3">
                  <div class="text-[11px] text-slate-600">다음 반(半)생일까지</div>
                  <div class="text-base font-semibold mt-0.5"><span id="halfB">–</span></div>
                </div>
                <div class="rounded-2xl border border-slate-200 bg-white p-3">
                  <div class="text-[11px] text-slate-600">빠른 동작</div>
                  <div class="mt-1 grid grid-cols-2 gap-2">
                    <button class="key" id="copyB" type="button">복사</button>
                    <button class="key" id="linkB" type="button">링크</button>
                  </div>
                </div>
              </div>
            </div>
          </div><!-- /calc-card -->
        </div>
      </section>
    </div>

    <p class="text-sm text-slate-600 mt-8">
      <strong>요점:</strong> 두 열은 **동일한 UI**지만, 왼쪽은 HTML 클래스가 길고 반복, 오른쪽은 **@apply**로 압축되어 유지보수성이 큼.
      실제 운영에선 Play CDN 대신 <em>GitHub Actions</em>로 CSS를 빌드해 <code>assets/site.css</code>를 쓰는 방식을 권장.
    </p>
  </div>

  <!-- 계산기 공용 JS (양쪽 폼에 동일 로직 주입) -->
  <script>
    const fmt = d => `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
    const addMonths = (d, m) => { const x = new Date(d); const day=x.getDate(); x.setMonth(x.getMonth()+m); if (x.getDate()!==day) x.setDate(0); return x; };
    function intlAge(dob, asof){ let a = asof.getFullYear()-dob.getFullYear(); const bThis = new Date(asof.getFullYear(), dob.getMonth(), dob.getDate()); if(asof < bThis) a -= 1; return a; }
    function insAge(dob, asof){
      const base = intlAge(dob, asof);
      const lastYear = asof.getFullYear() - (asof < new Date(asof.getFullYear(), dob.getMonth(), dob.getDate()) ? 1 : 0);
      const last = new Date(lastYear, dob.getMonth(), dob.getDate());
      const half = addMonths(last,6);
      const plus = asof >= half ? 1 : 0;
      return {base, ins: base+plus, half};
    }
    function human(ms){ if(ms<0) ms=0; const d=Math.floor(ms/86400000), h=Math.floor((ms%86400000)/3600000); return `${d}일 ${h}시간`; }

    function hook(prefix){
      const form = document.getElementById('form'+prefix);
      const dob = document.getElementById('dob'+prefix);
      const reset = document.getElementById('reset'+prefix);
      const num = document.getElementById('num'+prefix);
      const intl = document.getElementById('intl'+prefix);
      const rule = document.getElementById('rule'+prefix);
      const half = document.getElementById('half'+prefix);
      const badge = document.getElementById('badge'+prefix);
      const copy = document.getElementById('copy'+prefix);
      const link = document.getElementById('link'+prefix);

      form.addEventListener('submit', e=>{
        e.preventDefault();
        if(!dob.value) return;
        const asof = new Date();
        const d = new Date(dob.value);
        const r = insAge(d, asof);
        num.textContent = r.ins;
        intl.textContent = r.base;
        rule.textContent = (asof >= r.half) ? '오늘 기준: 최근 생일부터 6개월 경과 → +1' : '오늘 기준: 최근 생일부터 6개월 미만';
        const ms = r.half - asof;
        half.textContent = (ms<=0) ? '이미 전환됨' : `${fmt(r.half)} (약 ${human(ms)} 남음)`;
        badge.textContent = `${r.ins}세`;
      });

      reset.addEventListener('click', ()=>{
        dob.value=''; num.textContent='--'; intl.textContent='–'; rule.textContent='생년월일을 입력하세요'; half.textContent='–'; badge.textContent='–';
      });

      copy.addEventListener('click', async ()=>{
        const t = `보험나이: ${num.textContent}세 (만나이 ${intl.textContent}세, 기준일 ${fmt(new Date())})`;
        try{ await navigator.clipboard.writeText(t); copy.textContent='복사됨'; setTimeout(()=>copy.textContent= (prefix==='A'?'복사':'복사'),1200);}catch{}
      });

      link.addEventListener('click', async ()=>{
        const u = new URL(location.href); if(dob.value) u.searchParams.set('dob', dob.value);
        try{ await navigator.clipboard.writeText(u.toString()); link.textContent='링크 복사됨'; setTimeout(()=>link.textContent='링크',1200);}catch{ alert(u.toString()); }
      });

      // URL 파라미터로 DOB 세팅
      const p = new URL(location.href).searchParams.get('dob'); if(p){ dob.value=p; form.dispatchEvent(new Event('submit')); }
    }

    hook('A'); hook('B');
  </script>
</body>
</html>
